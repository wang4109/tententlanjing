(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af81b"],{"0f2a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("bk-form",{attrs:{"form-type":"inline",model:t.formData}},[a("bk-form-item",{attrs:{label:"业务名称"}},[a("bk-select",{staticStyle:{width:"120px"},attrs:{searchable:""},model:{value:t.formData.task,callback:function(e){t.$set(t.formData,"task",e)},expression:"formData.task"}},t._l(t.taskList,function(t){return a("bk-option",{key:t.bk_biz_id,attrs:{id:t.bk_biz_name,name:t.bk_biz_name}})}),1)],1),a("bk-form-item",{attrs:{label:"模板类型"}},[a("bk-select",{staticStyle:{width:"120px"},attrs:{searchable:""},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typeList,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})}),1)],1),a("bk-form-item",{attrs:{label:"模板名称"}},[a("bk-input",{attrs:{placeholder:"名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("bk-form-item",[a("bk-button",{staticClass:"mr5",attrs:{theme:"default",title:"新增",icon:"bk-icon icon-search"},on:{click:function(e){return t.fetchTaskList()}}},[t._v("搜索")]),a("bk-button",{attrs:{theme:"primary",title:"新增",icon:"plus"},on:{click:function(e){return t.$router.push({name:"templetWrite"})}}},[t._v("新增")])],1)],1),a("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{data:t.data,size:t.size,stripe:!0,pagination:t.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange}},[a("bk-table-column",{attrs:{type:"index",label:"序列",align:"center",width:"60"}}),a("bk-table-column",{attrs:{label:"模板名称",prop:"templetName"}}),a("bk-table-column",{attrs:{label:"业务名称",prop:"business"}}),a("bk-table-column",{attrs:{label:"模板类型",prop:"type"}}),a("bk-table-column",{attrs:{label:"创建者",prop:"user"}}),a("bk-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("bk-table-column",{attrs:{label:"更新者",prop:"updateUser"}}),a("bk-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr3",staticStyle:{border:"0"},attrs:{icon:"bk-icon icon-cog-shape"},on:{click:function(a){t.visiable2=!0,t.formData2.type=e.row.type,t.formData2.name=e.row.templetName,t.formData2.task=e.row.business}}}),a("bk-button",{staticClass:"mr3",staticStyle:{border:"0"},attrs:{icon:"bk-icon icon-download"},on:{click:function(a){return t.dowmload(e.row.templetUrl)}}}),a("bk-button",{staticClass:"mr3",staticStyle:{border:"0"},attrs:{icon:"bk-icon icon-close"},on:{click:function(a){t.visiable=!0,t.delId=e.row.id,t.row_index=e.row}}})]}}])}),a("bk-dialog",{attrs:{"render-directive":"if","mask-close":!1,"show-mask":!1,"header-position":"left",title:"删除确认"},on:{confirm:function(e){return t.remove()}},model:{value:t.visiable,callback:function(e){t.visiable=e},expression:"visiable"}},[t._v("\n        该模板将被删除，操作确认？\n    ")]),a("bk-dialog",{attrs:{title:"创建代办任务","header-position":"center",width:500,position:{top:100}},model:{value:t.visiable2,callback:function(e){t.visiable2=e},expression:"visiable2"}},[a("bk-form",{ref:"validateForm",attrs:{model:t.formData2,rules:t.rules}},[a("bk-form-item",{attrs:{label:"业务名称",required:!0,property:"task"}},[a("bk-input",{attrs:{disabled:!0},model:{value:t.formData2.task,callback:function(e){t.$set(t.formData2,"task",e)},expression:"formData2.task"}})],1),a("bk-form-item",{attrs:{label:"模板类型",required:!0,property:"type"}},[a("bk-input",{attrs:{disabled:!0},model:{value:t.formData2.type,callback:function(e){t.$set(t.formData2,"type",e)},expression:"formData2.type"}})],1),a("bk-form-item",{attrs:{label:"模板名称",required:!0,property:"name"}},[a("bk-input",{attrs:{disabled:!0},model:{value:t.formData2.name,callback:function(e){t.$set(t.formData2,"name",e)},expression:"formData2.name"}})],1),a("bk-form-item",{attrs:{label:"操作识别号",required:!0,property:"uuid"}},[a("bk-input",{attrs:{placeholder:"全局唯一的待办操作识别号"},model:{value:t.formData2.uuid,callback:function(e){t.$set(t.formData2,"uuid",e)},expression:"formData2.uuid"}})],1)],1)],1)],1)],1)},n=[],r=a("cebc"),s=(a("7f7f"),a("96cf"),a("3b8d")),o=a("cd68"),l=a("6e87"),c={components:{},data:function(){return{size:"small",delId:0,visiable:!1,row_index:-1,visiable2:!1,data:[],formData:{name:"",type:"",task:""},formData2:{name:"",type:"",task:"",uuid:""},rules:{uuid:[{required:!0,message:"请输入操作识别码",trigger:"blur"}]},taskList:[],typeList:[],pagination:{current:1,count:1,limit:20}}},mounted:function(){this.fetchTaskList(),this.fetchBusinessList(),this.fetchTypeList()},methods:{fetchBusinessList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:e=t.sent,a=e.data,i=e.status,/20\d/.test(i)&&(this.taskList=a.data.info);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetchTypeList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["e"])();case 2:e=t.sent,a=e.data,i=e.status,/20\d/.test(i)&&(this.typeList=a.data);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handlePageLimitChange:function(t){this.fetchTaskList({size:t})},handlePageChange:function(t){this.pagination.current=t,this.fetchTaskList({page:t})},fetchTaskList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a,i,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a={page:1,size:10,type:this.formData.type,business:this.formData.task,name:this.formData.name},a=Object(r["a"])({},a,e),t.next=4,Object(o["d"])(a);case 4:i=t.sent,n=i.data,s=i.status,/20\d/.test(s)&&(this.pagination.current=n.data.page,this.pagination.limit=n.data.size,this.pagination.count=n.data.total,this.data=n.data.task_list);case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),remove:function(){var t=this;this.delId&&Object(o["b"])({pk:this.delId}).then(function(e){if(e.status&&/20\d/.test(e.status))if(e.data.status){t.$bkInfo({type:"success",title:e.data.message,showFooter:!1});var a=t.data.indexOf(t.row_index);-1!==a&&t.data.splice(a,1)}else t.$bkInfo({type:"error",title:e.data.message,showFooter:!1})})},dowmload:function(t){var e=document.createElement("a");e.href=l["a"]+t,e.download="demo",e.click()}}},u=c,m=a("2877"),b=Object(m["a"])(u,i,n,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0af81b.a78f7967.js.map